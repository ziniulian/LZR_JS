LZR 的 Javascript 库：
===========

***

缓存：
---------------------

- 基础值：
	- 值控制器加入基础值，只有get和set方法。项目上的属性通通使用此类型。
	- LZR 的构造属性也要相应值控制器的基础值做出调整
	- 后处理对基础值的相应处理（无需做特殊处理）

- 单件模式：
	- 工具包的单件模式支持
	- HTML 常量元素的合理解决方案（使用单件模式解决）

- 设计反思：
	- 值控制器是否真的需要 前、中、后 三段事件？（值控制器 before 事件的返回值决定 change、set 事件是否触发，但不影响 set 方法的返回值。 而change、set事件的返回值则影响set方法的返回值。）
	- nodejs的基础服务，统一采用 cls_ 特殊字段进行配置
	- 数据类的合理结构
	- 后处理模版修正父类构造函数的执行问题
	- 数据类的测试
	- nodejs 统一 cls_ 配置后， openshift 的更新

***

计划：
---------------------

- 设计反思：
	- 基础容器的合理结构
	- 封装一个 css 通用类
	- 设计一个通用URL对象，供 nodejs 和 HTML 使用
	- nodejs 对 Markdown 文件的处理
	- Ajax 的异常处理

- 网页兼容移动端：
	- 移动端页面布局的统一解决办法
	- 封装天中地，中部判断dpi并做相应布局变化
	- 自适应屏幕的动态布局器
	- 判断客户端是否为移动端
	- 初始化body的fontsize。其它字体以em为单位。
	- js动态修改css的值

- 项目：
	- 发布系统
	- 作品移植

- 兼容微信浏览器：
	- 在微信浏览器中使用其它浏览器打开链接
	- 微信分享类，朋友圈分享时有 标题、描述、图片

- 服务：
	- 时间服务
	- 代理服务

***




开发明细：
---------------------

##### 2016-3-9（基础数据）：
	HTML：改名。原名 HTML5
	基础.数据：
		类图结构优化
		修改构造器方法（init_）：实现子数据的递归创建
		添加递归创建子数据方法（initSubs）
		添加结构输出方法（print）
	基础.值控制器：
		明确before、change、set三个事件之间的关系。（值控制器 before 事件的返回值决定 change、set 事件是否触发，但不影响 set 方法的返回值。 而change、set事件的返回值则影响set方法的返回值。）
	nodejs.未使用框架的最基础主服务：
		修改配置子服务（initSubs）：统一采用 cls_ 特殊字段进行配置
	后处理模版修正父类构造函数的执行问题

##### 2016-3-7（添加基础值）：
	基础：添加基础值类（LZR.Base.Val）
	nodejs.未使用框架的最基础主服务：
		添加服务属性（srv）
		修改构造器（init_）：构造器初始化服务属性
		添加停止服务方法（stop）
		修改启动服务方法（start）：使用服务属性
	基础.回调函数集合：
		改名添加回调函数方法（add）：原名 append
		修改删除回调函数方法（del）：加入 JS 的 delete 去属性功能
		修改执行回调函数（execute）：函数不调用不返回 false，有一个函数调用返回 false，就返回 false。
	基础.值控制器：
		继承基础值
		改名事件集属性（evt）：原名 event
		修改设置值（set）：适应基础值的返回标准
		修改构造器（init_）：初始化事件的调用对象
	LZR：
		修改构造属性方法（setObj）：适应基础值
		修改判断一个对象的属性是否存在（exist）：解决值为 null 和 undefined 时的报错问题
	改用 readme 记录开发日志

##### 2016-3-4（添加单件模式）：
	LZR：添加单件对象创建方法
	后处理对重数为1的外链进行单件处理
	基础.时间：用到的字符串工具改为单件模式
	H5.基础.Ajax：用到的JSON工具改为单件模式
	H5.基础.JSON：源对象改为私有属性
	将类图中未完善的、有隐患的、没采用最新理念结构的类标记为红色

***




设计原则：
---------------------

##### 以数据为根，以事件驱动：
1. 项目要分清 数据层、操作层、展示层（MVC）
	- 数据层：存放项目所需要的所有查询数据及操作数据 等
	- 操作层：依赖数据层的数据，并实现各数据变换时的所有功能操作
	- 展示层：分为控制器的展示层，和功能的展示层
		- 功能展示层：由操作层控制，以展示相应功能
		- 控制器展示层：是用户可以修改数据的界面，既要能够修改数据，也要被操作层控制，以响应数据层数据的变化。
1. 尽量以数据驱动方法，而不是用方法去变更数据
1. 值控制器的 before 事件不影响 set 方法的返回值

##### 构造参数：
1. 任何类都能 new 空值
1. 创建参数统一用 LZR.setObj 进行赋值
1. 方法内尽量使用属性名和参数名，避免直接使用类名

##### DOM元素：
1. 要考虑到视图元素的大小、和可见性的变化

##### 语法规范：
1. 删除方法统一使用 del
1. 添加方法统一使用 add
1. 服务缩写 srv
1. 事件缩写 evt

1. cls_ ：初始化时，用于明确创建类型的特殊字段
1. chd_ ：用于递归创建子数据的特殊字段

1. init_ ：LZR库，统一的构造器方法名
1. super_ ：LZR库，统一的父类集合名（数组）
1. className_ ：LZR库，统一的类名标识
1. version_ ：LZR库，统一的版本标识

***
